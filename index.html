<!DOCTYPE html>
<html>
<head>
  <script src="jspsych-6.1.0/jspsych.js"></script>
  <script src="jspsych-6.1.0/plugins/jspsych-audio-similarity-slider.js"></script>
  <script src="jspsych-6.1.0/plugins/jspsych-audio-slider-response.js"></script>
  <script src="jspsych-6.1.0/plugins/jspsych-html-button-response.js"></script>
  <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
  <link rel="stylesheet" href="jspsych-6.1.0/css/jspsych.css"></link>
</head>
<body></body>
<script>
  var participant = jsPsych.randomization.randomID()
  jsPsych.data.addProperties({participant_id: participant});

  var pre_audio = {
    type: 'html-button-response',
    stimulus: '4: Recent versions of Chrome require the user to interact with a page before it can play audio. '+
    'Clicking the button below counts as an interaction. Be aware of this when planning audio experiments if '+
    'you want the first trial to include audio.',
    choices: ['Continue']
  };

  var test_stimuli = [
    {stimuli: ["sound/speech_red.mp3", "sound/speech_blue.mp3"]},
    // {stimuli: ["sound/speech_green.mp3", "sound/hammer.mp3"]}
  ];

  var trial = {
    type: 'audio-similarity-slider',
    stimuli: jsPsych.timelineVariable('stimuli'),
    shuffle: true,
    question: 'task',
    start_gap: 1000,
    mid_gap: 2000,
    end_gap: 1000,
    labels: ['Not Funny', 'Funny'],
    slider_width: 500,
    require_movement: true,
    require_full: true,
    prompt: '<p>How funny is the joke?</p>'
  };

  var procedure = {
    timeline: [trial],
    timeline_variables: test_stimuli,
    randomize_order: true,
  };

  var timeline = [];
  timeline.push(pre_audio);
  timeline.push(procedure);


  var audio = ["sound/speech_red.mp3", "sound/speech_blue.mp3", "sound/speech_green.mp3", "sound/hammer.mp3"]
  jsPsych.init({
    preload_audio: audio,
    timeline: timeline,
    use_webaudio: true,
    on_finish: function() {
      document.write(jsPsych.data.getInteractionData().addToAll({participant_id: participant}).json());
    },
  });
</script>

</html>
